!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i=new class{constructor(){this.hugeScreen=null,this.largeScreen=null,this.mediumScreen=null,this.smallScreen=null,this.currentPage=1,this.videosPerPage=null,this.pagesPerPage=null,this.hugeScreenQuery="(min-width: 1200px)",this.largeScreenQuery="(min-width: 900px) and (max-width: 1199px)",this.mediumScreenQuery="(min-width: 600px) and (max-width: 899px)",this.smallScreenQuery="(min-width: 300px) and (max-width: 599px)"}createMediaQueries(){this.hugeScreen=window.matchMedia(this.hugeScreenQuery),this.largeScreen=window.matchMedia(this.largeScreenQuery),this.mediumScreen=window.matchMedia(this.mediumScreenQuery),this.smallScreen=window.matchMedia(this.smallScreenQuery)}addMediaQueryListeners(e){this.hugeScreen.addListener(e),this.largeScreen.addListener(e),this.mediumScreen.addListener(e),this.smallScreen.addListener(e)}defineInitalDisplayProperties(){this.hugeScreen.matches?(this.videosPerPage=4,this.pagesPerPage=5):this.largeScreen.matches?(this.videosPerPage=3,this.pagesPerPage=5):this.mediumScreen.matches?(this.videosPerPage=2,this.pagesPerPage=5):this.smallScreen.matches&&(this.videosPerPage=1,this.pagesPerPage=3)}};var a=new class{createSearchingBlock(){const e=document.createElement("header");e.classList.add("header");const t=document.createElement("h1");t.classList.add("header__title"),t.innerHTML="gle";const n=document.createElement("span");n.classList.add("header__highlight"),n.innerHTML="You";const i=document.createElement("div");i.classList.add("search__form");const a=document.createElement("input");a.classList.add("header__search"),a.setAttribute("type","text"),a.setAttribute("placeholder","Type here");const s=document.createElement("button");s.classList.add("header__search-button");const r=document.createElement("i");r.classList.add("fas","fa-search"),s.appendChild(r),i.appendChild(a),i.appendChild(s),t.prepend(n),e.appendChild(t),e.appendChild(i),document.body.appendChild(e)}createMainBlock(){const e=document.createElement("main");e.classList.add("main");const t=document.createElement("div");t.classList.add("main__slider");const n=this.createNavigation();e.appendChild(t),e.appendChild(n),document.body.appendChild(e)}createNavigation(){const e=document.createElement("div");e.classList.add("main__navigation");const t=document.createElement("button");t.classList.add("navigation__prev","navigation__button"),t.innerHTML="Prev";const n=document.createElement("button");n.classList.add("navigation__next","navigation__button"),n.innerHTML="Next";const i=document.createElement("ul");return i.classList.add("paginator"),e.appendChild(t),e.appendChild(i),e.appendChild(n),e}createVideoDataElement(e){const t=document.createElement("div");t.classList.add("slider__item");const n=document.createElement("a");n.classList.add("item__link"),n.setAttribute("href","https://www.youtube.com/watch?v="+e.id),n.setAttribute("draggable","false"),n.setAttribute("target","_blank");const i=document.createElement("img"),a=e.snippet.thumbnails.medium.url;i.classList.add("item__image"),i.setAttribute("src",a),i.setAttribute("draggable","false");const s=document.createElement("div");s.classList.add("item__container");const r=document.createElement("h2");r.classList.add("item__title"),r.innerHTML=e.snippet.title;const c=document.createElement("div");c.classList.add("item__info");const d=document.createElement("span");d.classList.add("item__author"),d.innerHTML=e.snippet.channelTitle;const o=document.createElement("span");o.classList.add("item__date"),o.innerHTML=new Date(Date.parse(e.snippet.publishedAt)).toDateString();const l=document.createElement("p");l.classList.add("item__description"),l.innerHTML=e.snippet.description;const u=document.createElement("ul");u.classList.add("item__statistic");const h=document.createElement("li");h.classList.add("item__likes","item__count"),h.innerHTML=e.statistics.likeCount;const m=document.createElement("li");m.classList.add("item__dislikes","item__count"),m.innerHTML=e.statistics.dislikeCount;const p=document.createElement("li");return p.classList.add("item__views","item__count"),p.innerHTML=e.statistics.viewCount,c.appendChild(d),c.appendChild(o),u.appendChild(h),u.appendChild(m),u.appendChild(p),n.appendChild(i),s.appendChild(r),s.appendChild(c),s.appendChild(l),s.appendChild(u),t.appendChild(n),t.appendChild(s),t}createSetOfVideoDataElements(e){const t=e.length,n=document.createElement("div");n.classList.add("main__slider-page");for(let i=0;i<t;i++){const t=this.createVideoDataElement(e[i]);n.appendChild(t)}document.querySelector(".main__slider").appendChild(n)}createSetOfNavigatElems(e){const t=document.createDocumentFragment(),n=document.createElement("li");n.classList.add("paginator__page");for(let i=0;i<e;i++){const e=n.cloneNode(!0);e.innerHTML=i+1,0===i&&e.classList.add("paginator__page_current"),t.appendChild(e)}document.querySelector(".paginator").appendChild(t)}};var s=new class{turnPrevPage(){if(1!==i.currentPage){const e=i.currentPage-1;this.passSelectedPaginatorItem(e);const t=this.giveSelectedSetOfVideos(e);document.querySelector(".main__slider-page").classList.add("move-left"),this.delayDrawExecution(t,e,450)}}turnNextPage(){const e=i.currentPage+1;console.log("current = "+i.currentPage+"   next = "+e),this.passSelectedPaginatorItem(e);const t=this.giveSelectedSetOfVideos(e);document.querySelector(".main__slider-page").classList.add("move-right"),this.delayDrawExecution(t,e,450)}turnCertainPage(e){if(e.target.parentElement===e.currentTarget){const t=+e.target.innerHTML;this.passSelectedPaginatorItem(t);const n=this.giveSelectedSetOfVideos(t);t>i.currentPage?document.querySelector(".main__slider-page").classList.add("move-right"):document.querySelector(".main__slider-page").classList.add("move-left"),this.delayDrawExecution(n,t,450)}}delayDrawExecution(e,t,n){setTimeout(function(){document.querySelector(".main__slider").innerHTML="",a.createSetOfVideoDataElements(e),i.currentPage=t},n)}clearPreviousResponse(){document.querySelector(".main__slider")&&(document.querySelector(".main__slider").innerHTML="",r.listOfVideos.length=0,i.currentPage=1,this.reloadPaginator())}reloadPaginator(){this.deselectPaginator(),Array.from(document.querySelector(".paginator").children).forEach((e,t)=>{e.innerHTML=t+1,0===t&&e.classList.add("paginator__page_current")})}deselectPaginator(){Array.from(document.querySelector(".paginator").children).forEach(e=>{e.classList.contains("paginator__page_current")&&e.classList.remove("paginator__page_current")})}giveSelectedSetOfVideos(e=i.currentPage){const t=e*i.videosPerPage-i.videosPerPage,n=t+i.videosPerPage,a=+document.querySelector(".paginator").children[i.pagesPerPage-1].innerHTML;return i.videosPerPage*(a+1)>r.getSetLength()&&r.makeRequest(r.makeNextPageURL()),r.listOfVideos.slice(t,n)}passSelectedPaginatorItem(e){const t=document.querySelector(".paginator").children,n=Math.floor(t.length/2),a=+t[n].innerHTML,s=Math.round(t.length/2),r=e-a;this.deselectPaginator(),e>i.currentPage?e<=s?t[e-1].classList.add("paginator__page_current"):(Array.from(t).forEach(e=>{const t=+e.innerHTML;e.innerHTML=t+r}),t[n].classList.add("paginator__page_current")):e<=s?(Array.from(t).forEach((e,t)=>{e.innerHTML=t+1}),t[e-1].classList.add("paginator__page_current")):(Array.from(t).forEach(e=>{const t=+e.innerHTML;e.innerHTML=t+r}),t[n].classList.add("paginator__page_current"))}rebuildSlider(){const e=i.videosPerPage*(i.currentPage-1)+1,t=i.pagesPerPage;i.defineInitalDisplayProperties();const n=Math.ceil(e/i.videosPerPage),s=document.querySelector(".paginator");if(s){t!=i.pagesPerPage&&(s.innerHTML="",a.createSetOfNavigatElems(i.pagesPerPage)),this.passSelectedPaginatorItem(n),i.currentPage=n;const e=this.giveSelectedSetOfVideos();document.querySelector(".main__slider").innerHTML="",a.createSetOfVideoDataElements(e)}}controlPagesByKeys(e){const t=document.querySelector(".navigation__prev"),n=document.querySelector(".navigation__next"),i=document.querySelector(".header__search"),a=document.querySelector(".header__search-button"),s=document.activeElement;37===e.keyCode&&t.dispatchEvent(new MouseEvent("click")),39===e.keyCode&&n.dispatchEvent(new MouseEvent("click")),13===e.keyCode&&s===i&&a.dispatchEvent(new MouseEvent("click"))}selectWorkingArea(){document.querySelector(".header__title").classList.add("header_color-decoration"),document.querySelector(".header__search").classList.add("header_color-decoration"),document.querySelector(".header__search").value="",document.querySelector(".header__highlight").classList.add("header_color-decoration")}deselectWorkingArea(){document.querySelector(".header__title").classList.remove("header_color-decoration"),document.querySelector(".header__search").classList.remove("header_color-decoration"),document.querySelector(".header__highlight").classList.remove("header_color-decoration")}};var r=new class{constructor(){this.KEY="AIzaSyCouAADWroSP9SX23a5KMzQlVa6X46fLJ4",this.URL="https://www.googleapis.com/youtube/v3/",this.maxResults=15,this.prevPage=null,this.nextPage=null,this.searchRequest=null,this.statisticRequest=null,this.listOfVideos=[],this.listOfVideosId=null}makeSearchURL(e,t,n,i){return this.searchRequest=`${this.URL+e}?key=${this.KEY}&part=${t}&type=${n}&maxResults=${this.maxResults}&q=${i}`,this.searchRequest}makeStatisticURL(e,t){return this.statisticRequest=`${this.URL+e}?key=${this.KEY}&part=${t}&id=${this.listOfVideosId.join()}`,this.statisticRequest}makeRequest(e,t){const n=this;fetch(e).then(function(e){return e.json()}).then(function(e){console.log(e),n.setListOfVidiosId(e.items),n.nextPage=e.nextPageToken;const t=n.makeStatisticURL("videos","snippet,statistics");return console.log(t),fetch(t)}).then(function(e){return e.json()}).then(function(e){if(n.addResponsDataToList(e.items),t){const e=s.giveSelectedSetOfVideos();t(e)}}).catch(function(e){console.log("Request failed",e)})}setListOfVidiosId(e){this.listOfVideosId=e.map(e=>e.id.videoId)}addResponsDataToList(e){this.listOfVideos.push(...e)}makePrevPageURL(){return this.searchRequest+`&pageToken=${this.prevPage}`}makeNextPageURL(){return this.searchRequest+`&pageToken=${this.nextPage}`}getSetLength(){return this.listOfVideos.length}};var c=new class{constructor(){this.startX=0,this.endX=0,this.startTime=0,this.endTime=0,this.swipeMinLength=100,this.swipeMaxDuration=800}downEvent(e){this.startTime=Date.now(),this.startX=e.clientX||e.changedTouches[0].clientX}upEvent(e){this.endX=e.clientX||e.changedTouches[0].clientX,this.endTime=Date.now();const t=this.endX-this.startX,n=this.endTime-this.startTime;console.log(n),t<-this.swipeMinLength&&n<this.swipeMaxDuration&&document.querySelector(".navigation__next").dispatchEvent(new MouseEvent("click")),t>+this.swipeMinLength&&n<this.swipeMaxDuration&&document.querySelector(".navigation__prev").dispatchEvent(new MouseEvent("click"))}};let d,o,l,u,h=!1;function m(){s.clearPreviousResponse(),h||(h=!0,a.createMainBlock(),l=document.querySelector(".main__slider"),u=document.querySelector(".paginator"),a.createSetOfNavigatElems(i.pagesPerPage),function(){const e=document.querySelector(".navigation__prev"),t=document.querySelector(".navigation__next"),n=s.turnPrevPage.bind(s),i=s.turnNextPage.bind(s),a=s.turnCertainPage.bind(s);e.addEventListener("click",n),t.addEventListener("click",i),u.addEventListener("click",a),l.addEventListener("mousedown",c.downEvent.bind(c)),l.addEventListener("mouseup",c.upEvent.bind(c)),l.addEventListener("touchstart",c.downEvent.bind(c)),l.addEventListener("touchend",c.upEvent.bind(c))}());const e=o.value,t=r.makeSearchURL("search","snippet","video",e);let n=a.createSetOfVideoDataElements.bind(a);r.makeRequest(t,n)}function p(e){e.matches&&s.rebuildSlider()}window.onload=function(){a.createSearchingBlock(),d=document.querySelector(".header__search-button"),o=document.querySelector(".header__search"),i.createMediaQueries(),i.addMediaQueryListeners(p),i.defineInitalDisplayProperties(),window.addEventListener("keydown",s.controlPagesByKeys),d.addEventListener("click",m),d.addEventListener("keydown",s.controlPagesByKeys),o.addEventListener("focus",s.selectWorkingArea),o.addEventListener("blur",s.deselectWorkingArea)}}]);
//# sourceMappingURL=app.js.map